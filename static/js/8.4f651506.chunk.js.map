{"version":3,"sources":["hooks/useFetch.js","pages/ContactUs.js"],"names":["useFetch","url","_useState","useState","_useState2","Object","_Applications_apps_ieo_website_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","data","setData","_useState3","_useState4","loading","setLoading","fetchUrl","_ref","_Applications_apps_ieo_website_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Applications_apps_ieo_website_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","response","json","wrap","_context","prev","next","fetch","sent","stop","apply","this","arguments","useEffect","ContactUs","_useContext$pages$con","useContext","AppContext","pages","title","subtitle","hero","form","_React$useState","React","_React$useState2","_Applications_apps_ieo_website_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","open","setOpen","_React$useState3","_React$useState4","text","setText","_useFetch","react__WEBPACK_IMPORTED_MODULE_1___default","createElement","className","params","console","log","react_responsive_modal__WEBPACK_IMPORTED_MODULE_6__","isOpened","onClose","openFunc","center","style","padding","text-align","min-width","renderText","id","onSubmit","event","preventDefault","formNode","document","getElementById","FormData","leadData","TITLE","get","NAME","LAST_NAME","PHONE","VALUE","TYPE","EMAIL","COMPANY_TITLE","POST","COMMENTS","UF_CRM_1566463901338","UF_CRM_1566463931515","method","mode","cache","credentials","headers","Content-Type","redirect","referrer","body","JSON","stringify","fields","then","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","_ref3","value","_ref2","name","delete","err","return","htmlFor","label","type","required","rows","_components_shared_Image__WEBPACK_IMPORTED_MODULE_2__"],"mappings":"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","file":"static/js/8.4f651506.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst useFetch = url => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const fetchUrl = async () => {\n    const response = await fetch(url);\n    const json = await response.json();\n\n    setData(json);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchUrl();\n  }, []);\n\n  return { data, loading };\n};\n\nexport default useFetch;\n","import React, { useContext } from 'react';\n\nimport Image from '../components/shared/Image';\n\nimport { AppContext } from '../context/app';\nimport useFetch from '../hooks/useFetch';\n\nimport { renderText } from '../helpers';\n\nimport Modal from 'react-responsive-modal';\n\nconst ContactUs = () => {\n  const { pages: {\n    'contact-us': {\n      title,\n      subtitle,\n      hero,\n      form\n    }\n  } } = useContext(AppContext);\n  \n  const [open, setOpen] = React.useState(false)\n  const [text, setText] = React.useState('תודה!')\n\n  const Popup = (params) => {\n    console.log(params)\n    return (\n    <div>\n      <Modal open={params.isOpened} onClose={() => params.openFunc(false)} center>\n        <h2 style={{\n          'padding' : '10%',\n          'text-align': 'center',\n          'min-width': '200px' \n          }}>{params.text}</h2>\n      </Modal>\n    </div>\n  )\n}\n\n  const { data, loading } = useFetch(form.url);\n\n  const sendToBitrix = (event) => {\n    event.preventDefault();\n\n    var formNode = document.getElementById('contact_us_form');\n    var data = new FormData(formNode);\n\n    let bitrixURL = 'https://gobemark.info/rest/483/ya23gupm0zmpwajn/crm.lead.add';\n\n    var leadData = {\n      'TITLE': data.get('name:first')+' '+data.get('name:last'),\n      'NAME' : data.get('name:first'),\n      'LAST_NAME' : data.get('name:last'),\n      'PHONE' : [{'VALUE': data.get('phone'), 'TYPE': 'HOME'}],\n      'EMAIL' : [{'VALUE': data.get('email'), 'TYPE':'HOME'}],\n      'COMPANY_TITLE' : data.get('company'),\n      'POST' : data.get('position'),\n      'COMMENTS' : data.get('comment'),\n      'UF_CRM_1566463901338' : data.get('subscription')=='on'?'Y':'N',\n      'UF_CRM_1566463931515' : data.get('seller')=='on'?'Y':'N'\n    }\n\n    fetch(bitrixURL, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrer: 'no-referrer',\n      body: JSON.stringify({fields: leadData}),\n    }).then((res) => {\n\n      setOpen(true);\n\n      if (res['ok']){\n        setText('תודה!')\n\n        for(let [name, value] of data){\n          data.delete(name);\n        }\n      } else {\n        setText('טעות!')\n      }\n    });\n    return false;\n  };\n\n  return (\n    <section className=\"contact-us\">\n    <Popup isOpened={open} openFunc={setOpen} text={text}/>\n      <div className=\"container container--normal\">\n        <header className=\"contact-us__header\">\n          <h2 className=\"contact-us__title\">{title}</h2>\n          <h5 className=\"contact-us__subtitle\">{renderText(subtitle)}</h5>\n        </header>\n        <main className=\"contact-us__main\">\n          {(loading === false) && (\n            \n            <form className=\"contact-form\" id=\"contact_us_form\" onSubmit={sendToBitrix}>\n              <header className=\"contact-form__header\">\n                <h4 className=\"contact-form__title\">שדות חובה *</h4>\n              </header>\n              <main className=\"contact-form__main\">\n                <label htmlFor=\"input:name:first\" name=\"name:first\" className=\"Label\">שם פרטי *</label>\n                <input name=\"name:first\" className=\"Input\" label=\"שם פרטי *\" type=\"text\" required id=\"input:name:first\" /> \n                <label htmlFor=\"input:name:last\" name=\"name:last\" className=\"Label\">שם משפחה *</label>\n                <input name=\"name:last\" className=\"Input\" label=\"שם משפחה *\" type=\"text\" required id=\"input:name:last\"/>\n                <label htmlFor=\"input:phone\" name=\"phone\" className=\"Label\">מספר טלפון *</label>\n                <input name=\"phone\" className=\"Input\" label=\"מספר טלפון *\" type=\"tel\" required id=\"input:phone\"/>\n                <label htmlFor=\"input:email\" name=\"email\" className=\"Label\">דוא\"ל *</label>\n                <input name=\"email\" className=\"Input\" label=\"דוא&quot;ל *\" type=\"email\" required id=\"input:email\"/>\n                <label htmlFor=\"input:company\" name=\"company\" className=\"Label\">חברה *</label>\n                <input name=\"company\" className=\"Input\" label=\"חברה *\" type=\"text\" required id=\"input:company\"/>\n                <label htmlFor=\"input:position\" name=\"position\" className=\"Label\">תפקיד</label>\n                <input name=\"position\" className=\"Input\" label=\"תפקיד\" type=\"text\" id=\"input:position\"/>\n                <label htmlFor=\"input:comment\" name=\"comment\" className=\"Label\">הודעה</label>\n                <textarea name=\"comment\" className=\"Input Textarea\" label=\"הודעה\" type=\"textarea\" rows=\"6\" id=\"input:comment\"></textarea>\n                <label htmlFor=\"input:seller\" name=\"seller\" className=\"Label\">מבקש\\ת ליצור קשר עם איש מכירות</label>\n                <input name=\"seller\" className=\"Input\" label=\"מבקש\\ת ליצור קשר עם איש מכירות\" type=\"checkbox\" id=\"input:seller\"/>\n                <label htmlFor=\"input:subscription\" name=\"subscription\" className=\"Label\">האם תרצו לקבל חדשות ועדכונים?</label>\n                <input name=\"subscription\" className=\"Input\" label=\"האם תרצו לקבל חדשות ועדכונים?\" type=\"checkbox\" id=\"input:subscription\"/>\n                <input name=\"pay\" className=\"Input Submit Button\" label=\"שלח/י\" id=\"input:pay\" type=\"submit\" value=\"שלח/י\"/>\n              </main>\n            </form>\n          )}\n          <Image {...hero} />\n        </main>\n      </div>\n    </section>\n  );\n};\n\nexport default ContactUs;"],"sourceRoot":""}